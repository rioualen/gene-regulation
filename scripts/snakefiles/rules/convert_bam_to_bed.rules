"""
    ============================================
    Definition of the convertion bam to bed rule
    ============================================
"""

# rule bam_to_bed_all:
#     """Convert each bam_sorted files to bed files"""
#     input:expand('{read_dir}/{gsm}/{gsm}_bowtie_sorted.bed', gsm=GSM_LIST, read_dir={CHIP_READ_DIR})

rule bam_to_bed:
    input: CHIP_READ_DIR + "{reads}_sorted.bam"
    output: CHIP_READ_DIR + "{reads}_sorted.bed"
    log: CHIP_READ_DIR + "{reads}_bam_to_bed.log"
    benchmark: CHIP_READ_DIR + "{reads}_bam_to_bed_benchmark.json"
    params: qsub=QSUB_PARAM+" -e " + CHIP_READ_DIR + "{reads}_bam_to_bed_qsub.err -o " + CHIP_READ_DIR + "{reads}_bam_to_bed_qsub.out"
    shell:"bedtools bamtobed -i {input} > {output} 2> {log}"